{"version":3,"sources":["DataLayer.js","components/Dashboard/SidebarItem/SidebarItem.js","resources/img/spotifyLogo.svg","components/Dashboard/Sidebar/Sidebar.js","components/Dashboard/SongRow/SongRow.js","components/Dashboard/Main/Main.js","components/Dashboard/GalleryItem/GalleryItem.js","components/Dashboard/Gallery/Gallery.js","components/Dashboard/Header/Header.js","components/Dashboard/Player/Player.js","components/Dashboard/Dashboard.js","components/AdminDashboard/PrintData/PrintData.js","components/AdminDashboard/AddForm/AddForm.js","components/AdminDashboard/AdminDashboard.js","components/Festivals/FestivalBlock/FestivalBlock.js","login.js","components/Festivals/Festivals.js","useAuth.js","App.js","reducer.js","index.js"],"names":["DataLayerContext","createContext","DataLayer","initialState","reducer","children","Provider","value","useReducer","useDataLayerValue","useContext","SidebarItem","title","playlist","Icon","choosePlaylist","Favorite","cName","onClick","playingPlaylist","favorites","dispatch","activePlaylist","className","tabIndex","name","newFavorites","indexOf","id","splice","type","localStorage","setItem","Sidebar","playlists","festival","useState","isSidebarVisibleMobile","setIsSidebarVisibleMobile","height","window","innerHeight","width","innerWidth","dimensions","setDimensions","playingTrack","tracks","items","track","useEffect","handleResize","addEventListener","_","removeEventListener","event","fontSize","src","spotifyLogo","alt","logo_url","HomeIcon","sessionStorage","removeItem","map","FavoriteIcon","SongRow","playSong","playingNow","premium","album","images","url","image","artists","artist","join","Main","description","item","index","GalleryItem","Gallery","props","Header","handleClick","user","Avatar","display_name","spotifyApi","SpotifyWebApi","clientId","Player","accessToken","playingUris","uri","setAccessToken","token","callback","state","isPlaying","filter","play","uris","offset","styles","bgColor","color","trackNameColor","sliderColor","Dashboard","logout","getMe","then","res","body","product","catch","error","console","log","axios","get","data","el","festival_id","playlist_id","getPlaylist","href","PrintData","selectedData","openForm","dataToShow","setDataToShow","showAll","setShowAll","newData","maxIndex","length","i","push","AddForm","setData","handleFormChange","target","onSubmit","e","preventDefault","placeholder","onChange","logo_placeholder","errorMessage","FestivalsUrl","ArtistsUrl","PlaylistsUrl","FestivalsTitle","ArtistsTitle","PlaylistsTitle","AdminDashboard","festivals","setFestivals","setArtists","setPlaylists","visible","forms","setForms","playlistBase","setPlaylistBase","handleReturn","handleToggleForm","newForms","changedForm","find","f","festivalId","newId","errorText","formatError","forEach","includes","post","document","getElementsByClassName","innerHTML","newArtists","idx","playlistId","split","spotify_token","FestivalBlock","chooseFestival","scopes","login","getItem","location","Festivals","fests","setFests","JSON","stringify","a","result","fetchData","autoPlay","timer","animation","indicators","timeout","navButtonsProps","style","backgroundColor","borderRadius","indicatorIconButtonProps","margin","activeIndicatorIconButtonProps","indicatorContainerProps","marginTop","useAuth","code","refreshToken","expiresIn","history","pushState","interval","setInterval","err","clearInterval","urlCode","URLSearchParams","search","App","parse","action","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3fc1239a.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\n\r\nexport const DataLayerContext = createContext();\r\n\r\nexport const DataLayer = ({ initialState, reducer, children }) => (\r\n    <DataLayerContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </DataLayerContext.Provider>\r\n)\r\n\r\nexport const useDataLayerValue = () => useContext(DataLayerContext);","import React from 'react';\r\nimport './SidebarItem.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport AudiotrackIcon from '@material-ui/icons/Audiotrack';\r\n\r\n\r\nfunction SidebarItem({ title, playlist, Icon, choosePlaylist, Favorite, cName, onClick }) {\r\n    const [{ playingPlaylist, favorites }, dispatch] = useDataLayerValue();\r\n\r\n    function handlePlaylistClick() {\r\n        choosePlaylist && choosePlaylist(playlist);\r\n    }\r\n\r\n    function handleFavoriteClick() {\r\n        let newFavorites = favorites ? [...favorites] : [];\r\n\r\n        (newFavorites.indexOf(playlist.id) === -1)\r\n            ? newFavorites = newFavorites ? [...newFavorites, playlist.id] : [playlist.id]\r\n            : newFavorites.splice(newFavorites.indexOf(playlist.id), 1);\r\n\r\n        dispatch({\r\n            type: \"SET_FAVORITES\",\r\n            favorites: newFavorites,\r\n        });\r\n        localStorage.setItem('favorites', newFavorites);\r\n    }\r\n\r\n    let activePlaylist = (playingPlaylist === playlist);\r\n\r\n    return (\r\n        <div className={`sidebarItem ${activePlaylist ? 'sidebarItem-active' : ''}`} tabIndex={0}>\r\n            {activePlaylist && <AudiotrackIcon />}\r\n            {Icon && <Icon className='sidebarItem__icon' />}\r\n            {Icon ? <h4 className='sidebarItem__title sidebarItem__text' onClick={onClick}>{title}</h4> : <p className='sidebarItem__text' onClick={handlePlaylistClick}>{playlist.name}</p>}\r\n            {Favorite && <Favorite className={`sidebarItem__favorite ${cName || ''}`} onClick={handleFavoriteClick} tabIndex={0} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SidebarItem;\r\n","export default __webpack_public_path__ + \"static/media/spotifyLogo.4f8bc335.svg\";","import React, { useState, useEffect } from 'react';\r\nimport './Sidebar.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport SidebarItem from '../SidebarItem/SidebarItem';\r\nimport spotifyLogo from '../../../resources/img/spotifyLogo.svg';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nconst MaxWidth = 768;\r\n\r\nfunction Sidebar() {\r\n    const [{ playlists, favorites, festival }, dispatch] = useDataLayerValue();\r\n    const [isSidebarVisibleMobile, setIsSidebarVisibleMobile] = useState(false);\r\n    const [dimensions, setDimensions] = useState({\r\n        height: window.innerHeight,\r\n        width: window.innerWidth\r\n    });\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setDimensions({\r\n                height: window.innerHeight,\r\n                width: window.innerWidth\r\n            })\r\n\r\n        }\r\n        window.addEventListener('resize', handleResize)\r\n        return _ => {\r\n            window.removeEventListener('resize', handleResize)\r\n        }\r\n    })\r\n\r\n    function choosePlaylist(playlist) {\r\n        dispatch({\r\n            type: \"SET_PLAYLIST\",\r\n            playingPlaylist: playlist,\r\n        });\r\n        dispatch({\r\n            type: \"SET_PLAYING_TRACK\",\r\n            playingTrack: playlist.tracks.items[0].track,\r\n        });\r\n    }\r\n\r\n    function handleClick() {\r\n        dispatch({\r\n            type: \"SET_FESTIVAL\",\r\n            festival: null,\r\n        });\r\n        sessionStorage.removeItem('selectedFestival');\r\n    }\r\n\r\n    function handleSidebarMobileClick() {\r\n        (window.innerWidth <= MaxWidth) ? setIsSidebarVisibleMobile(true) : setIsSidebarVisibleMobile(false);\r\n        (isSidebarVisibleMobile) && setIsSidebarVisibleMobile(false);\r\n    }\r\n\r\n    return (\r\n        <aside className={`sidebar ${isSidebarVisibleMobile ? 'mobile' : ''}`} onClick={event => handleSidebarMobileClick(event)}>\r\n            {\r\n                ((dimensions.width <= MaxWidth) && !isSidebarVisibleMobile)\r\n                    ?\r\n                    <MenuIcon fontSize=\"large\" className='sidebar__burger' tabIndex={0} />\r\n                    :\r\n                    <>\r\n                        <header className='sidebar__header'>\r\n                            <div className=\"sidebar__logos\">\r\n                                <img className='sidebar__logo' src={spotifyLogo} alt=\"Spotify logo\"></img>\r\n                                <img className='sidebar__logo' src={festival.logo_url} alt=\"Festival logo\"></img>\r\n                            </div>\r\n                            <SidebarItem title=\"Home\" Icon={HomeIcon} onClick={handleClick} />\r\n                        </header>\r\n\r\n                        <h3 className='sidebar__title'>FAVORITE</h3>\r\n                        {\r\n                            playlists?.map(playlist => (\r\n                                favorites.indexOf(playlist.id) !== -1 &&\r\n                                < SidebarItem playlist={playlist} key={playlist.id} choosePlaylist={choosePlaylist} Favorite={FavoriteIcon} cName='sidebarItem-favorite' />\r\n                            ))\r\n                        }\r\n\r\n                        <h3 className='sidebar__title'>PLAYLISTS</h3>\r\n                        {\r\n                            playlists?.map(playlist => (\r\n                                favorites.indexOf(playlist.id) === -1 &&\r\n                                < SidebarItem playlist={playlist} key={playlist.id} choosePlaylist={choosePlaylist} Favorite={FavoriteIcon} />\r\n                            ))\r\n                        }\r\n                    </>\r\n            }\r\n        </aside>\r\n    );\r\n}\r\n\r\nexport default Sidebar;","import React from 'react';\r\nimport './SongRow.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\n\r\nfunction SongRow({ track, playSong }) {\r\n    const [{ playingPlaylist, playingTrack, playingNow, premium }] = useDataLayerValue();\r\n\r\n    if (!track) return (<></>);\r\n\r\n    return (\r\n        <article className={`songRow ${(playingTrack === track) ? 'songRow-active' : ''}`} onClick={() => playSong(track)} tabIndex={0}>\r\n            {((playingTrack === track) && premium) &&\r\n                (playingNow ? <PauseIcon className='songRow__icon' /> : <PlayArrowIcon className='songRow__icon' />)}\r\n            <img className='songRow__img' src={track.album?.images[0]?.url || playingPlaylist?.image} alt=\"\" />\r\n            <div className='songRow__info'>\r\n                <h3 className='songRow__name'>{track.name}</h3>\r\n                <p className='songRow__artist'>\r\n                    {track.artists.map((artist) => artist.name).join(', ')}\r\n                </p>\r\n            </div>\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default SongRow;","import React from 'react';\r\nimport './Main.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport SongRow from '../SongRow/SongRow';\r\n\r\nfunction Main() {\r\n    const [{ playingPlaylist, playingNow, playingTrack }, dispatch] = useDataLayerValue();\r\n\r\n    const playSong = (track) => {\r\n        (track === playingTrack)\r\n            ? dispatch({\r\n                type: \"SET_PLAYING_NOW\",\r\n                playingNow: !playingNow,\r\n            })\r\n            : dispatch({\r\n                type: \"SET_PLAYING_TRACK\",\r\n                playingTrack: track,\r\n            });\r\n    }\r\n\r\n    return (\r\n        <main className=\"main\">\r\n            <header className='main__info'>\r\n                <img className='main__logo' src={playingPlaylist?.image} alt='Playlist logo' />\r\n                <div className='main__infoText'>\r\n                    <h2 className='main__name'>{playingPlaylist?.name}</h2>\r\n                    <p className='main__description'>{playingPlaylist?.description}</p>\r\n                </div>\r\n            </header>\r\n\r\n            <section className=\"main__songs\">\r\n                {playingPlaylist?.tracks?.items.map((item, index) => (\r\n                    < SongRow track={item.track} key={index} playSong={playSong} />\r\n                ))}\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\nimport './GalleryItem.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\n\r\n\r\nfunction GalleryItem({ playlist }) {\r\n    // eslint-disable-next-line no-empty-pattern\r\n    const [{ }, dispatch] = useDataLayerValue();\r\n\r\n    function handleClick() {\r\n        dispatch({\r\n            type: \"SET_PLAYLIST\",\r\n            playingPlaylist: playlist,\r\n        });\r\n        dispatch({\r\n            type: \"SET_PLAYING_TRACK\",\r\n            playingTrack: playlist.tracks.items[0].track,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className='galleryItem' onClick={handleClick} tabIndex={0}>\r\n            <img src={playlist.image} alt=\"Playlist cover\" className=\"galleryItem__img\" />\r\n            <p className=\"galleryItem__name\">{playlist.name}</p>\r\n            <p className=\"galleryItem__description\">{playlist.description}</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default GalleryItem;","import React from 'react';\r\nimport './Gallery.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport GalleryItem from '../GalleryItem/GalleryItem'\r\n\r\nfunction Gallery(props) {\r\n    const [{ playlists }] = useDataLayerValue();\r\n\r\n    return (\r\n        <div className='gallery'>\r\n            <div className=\"gallery__items\">\r\n                {playlists?.map(item => (\r\n                    <GalleryItem playlist={item} key={item.id} />\r\n                ))}</div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Gallery;","import React from 'react';\r\nimport './Header.css';\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\n\r\n\r\nfunction Header({ handleClick }) {\r\n    const [{ user }] = useDataLayerValue();\r\n\r\n    return (\r\n        <header className='header' >\r\n            <div className=\"header__wrapper\" tabIndex={0}>\r\n                <Avatar src={user?.images[0]?.url} alt={user?.display_name} />\r\n                <p className='header__text'>{user?.display_name}</p>\r\n                <ExitToAppIcon className='header__logout' onClick={handleClick} />\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import { useEffect } from 'react';\r\nimport './Player.css'\r\nimport { useDataLayerValue } from '../../../DataLayer';\r\nimport SpotifyPlayer from \"react-spotify-web-playback\";\r\nimport SpotifyWebApi from 'spotify-web-api-node';\r\n\r\nconst clientId = 'afa5c44e65bc40928f489b6bff9d91fe';\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n    clientId: clientId,\r\n});\r\n\r\nfunction Player() {\r\n    const [{ accessToken, playingPlaylist, playingTrack, playingNow }, dispatch] = useDataLayerValue();\r\n\r\n    useEffect(() =>\r\n        dispatch({\r\n            type: \"SET_PLAYING_NOW\",\r\n            playingNow: true,\r\n        }), [dispatch, playingPlaylist]);\r\n\r\n    if (!accessToken) return null;\r\n\r\n    const playingUris = playingPlaylist?.tracks.items.map((item) => item.track.uri);\r\n\r\n    spotifyApi.setAccessToken(accessToken);\r\n\r\n    return (\r\n        <footer className=\"footer\">\r\n            < SpotifyPlayer\r\n                token={accessToken}\r\n                callback={\r\n                    state => {\r\n                        if (playingNow !== state.isPlaying)\r\n                            dispatch({\r\n                                type: \"SET_PLAYING_NOW\",\r\n                                playingNow: state.isPlaying,\r\n                            });\r\n                        if (state?.track?.id !== playingTrack?.id) {\r\n                            let track = playingPlaylist?.tracks.items.filter(item => item?.track.id === state?.track?.id)[0];\r\n                            if (track && track.track !== playingTrack)\r\n                                dispatch({\r\n                                    type: \"SET_PLAYING_TRACK\",\r\n                                    playingTrack: track.track,\r\n                                });\r\n                        }\r\n\r\n                    }\r\n                }\r\n                play={playingNow}\r\n                uris={playingPlaylist ? playingUris : []}\r\n                offset={playingTrack ? playingUris.indexOf(playingTrack.uri) : 0}\r\n                styles={{\r\n                    bgColor: '#282828',\r\n                    color: '#fff',\r\n                    trackNameColor: '#fff',\r\n                    sliderColor: '#1ed760',\r\n                }} /></footer>\r\n    );\r\n}\r\n\r\nexport default Player;","import { useEffect } from 'react';\r\nimport './Dashboard.css';\r\nimport { useDataLayerValue } from '../../DataLayer';\r\nimport axios from 'axios';\r\nimport SpotifyWebApi from 'spotify-web-api-node';\r\nimport Sidebar from './Sidebar/Sidebar';\r\nimport Main from './Main/Main';\r\nimport Gallery from './Gallery/Gallery';\r\nimport Header from './Header/Header';\r\nimport Player from './Player/Player';\r\n\r\n\r\nconst PlaylistsUrl = 'http://ec2-52-51-232-161.eu-west-1.compute.amazonaws.com/api/playlist/';\r\n\r\nconst clientId = 'afa5c44e65bc40928f489b6bff9d91fe';\r\n\r\nconst spotifyApi = new SpotifyWebApi({\r\n    clientId: clientId,\r\n});\r\n\r\nfunction Dashboard() {\r\n    const [{ accessToken, playingPlaylist, festival, playlists }, dispatch] = useDataLayerValue();\r\n\r\n    function handleClick() {\r\n        dispatch({\r\n            type: \"SET_ACCESS_TOKEN\",\r\n            user: null,\r\n        });\r\n        dispatch({\r\n            type: \"SET_REFRESH_TOKEN\",\r\n            user: null,\r\n        });\r\n        dispatch({\r\n            type: \"SET_EXPIRES_IN\",\r\n            user: null,\r\n        });\r\n        dispatch({\r\n            type: \"SET_FESTIVAL\",\r\n            user: null,\r\n        });\r\n        sessionStorage.setItem('loggedIn', false);\r\n        sessionStorage.removeItem('state');\r\n        sessionStorage.removeItem('token');\r\n        sessionStorage.removeItem('refreshToken');\r\n        sessionStorage.removeItem('expiresIn');\r\n        sessionStorage.removeItem('selectedFestival');\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!accessToken) return;\r\n\r\n        spotifyApi.setAccessToken(accessToken);\r\n\r\n        function logout() {\r\n            dispatch({\r\n                type: \"SET_ACCESS_TOKEN\",\r\n                user: null,\r\n            });\r\n            dispatch({\r\n                type: \"SET_REFRESH_TOKEN\",\r\n                user: null,\r\n            });\r\n            dispatch({\r\n                type: \"SET_EXPIRES_IN\",\r\n                user: null,\r\n            });\r\n            dispatch({\r\n                type: \"SET_FESTIVAL\",\r\n                user: null,\r\n            });\r\n            sessionStorage.setItem('loggedIn', false);\r\n            sessionStorage.removeItem('token');\r\n            sessionStorage.removeItem('selectedFestival');\r\n        }\r\n\r\n        spotifyApi.getMe().then(res => {\r\n            dispatch({\r\n                type: \"SET_USER\",\r\n                user: res.body,\r\n            });\r\n\r\n            if (res.body.product !== 'open') {\r\n                dispatch({\r\n                    type: \"SET_PREMIUM\",\r\n                    premium: true,\r\n                });\r\n            }\r\n        }).catch((error) => { console.log(error); logout() });\r\n\r\n        axios.get(PlaylistsUrl)\r\n            .then(res => {\r\n                let ids = res.data.filter(\r\n                    (el) => el.festival_id === festival.id)\r\n                    .map((el) => el.playlist_id);\r\n                ids.map(id => (\r\n                    spotifyApi.getPlaylist(id).then(res => {\r\n                        let currentPlaylists = playlists.map((el) => el.id);\r\n                        (currentPlaylists.indexOf(id) === -1) &&\r\n                            dispatch({\r\n                                type: \"SET_PLAYLISTS\",\r\n                                playlist: {\r\n                                    description: res.body.description,\r\n                                    name: res.body.name,\r\n                                    id: res.body.id,\r\n                                    href: res.body.href,\r\n                                    tracks: res.body.tracks,\r\n                                    image: res.body.images[0].url,\r\n                                },\r\n                            });\r\n                    }).catch((error) => { console.log(error); logout() })\r\n                ));\r\n            }\r\n            )\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [accessToken, dispatch, festival.id])\r\n\r\n    return (\r\n        <div>\r\n            <section className=\"dashboard\">\r\n                <Sidebar />\r\n                <main className='main__wrapper'>\r\n                    <Header handleClick={handleClick} />\r\n                    {playingPlaylist ? <Main /> : <Gallery />}\r\n                </main>\r\n            </section>\r\n            <Player />\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default Dashboard;","import React, { useState, useEffect } from 'react';\r\nimport './PrintData.css'\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n\r\nfunction PrintData({ title, selectedData, data, onClick, openForm }) {\r\n    const [dataToShow, setDataToShow] = useState([]);\r\n    const [showAll, setShowAll] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (showAll) { setDataToShow([...data]); }\r\n        else {\r\n            let newData = [];\r\n            let maxIndex = (data.length > 10) ? 10 : data.length;\r\n            for (let i = 0; i < maxIndex; i++) {\r\n                newData.push(data[i]);\r\n            }\r\n            setDataToShow([...newData]);\r\n        }\r\n    }, [data, showAll]);\r\n\r\n    function getClasses(id) {\r\n        let classes = '';\r\n        ((selectedData && (typeof selectedData === 'number') && (selectedData === id)) ||\r\n            (selectedData && (typeof selectedData === 'object') && (selectedData.indexOf(id) > -1)))\r\n            ? classes = 'printData__element selected'\r\n            : classes = 'printData__element';\r\n        return classes;\r\n    }\r\n\r\n    function handleShowMore() {\r\n        setShowAll(!showAll);\r\n    }\r\n\r\n    return (\r\n        <section className='printData'>\r\n            <header className='printData__header'>{title}</header>\r\n\r\n            {(data.length > 10) && <button className=\"printData__button\" onClick={handleShowMore}>{showAll ? 'Show first 10' : 'Show all'}</button>}\r\n\r\n            <div className=\"printData__body\">\r\n                {dataToShow?.map(\r\n                    (item) =>\r\n                        <p className={getClasses(item?.id)} key={item?.id} onClick={() => onClick(item)} tabIndex={0}>{item?.name}</p>\r\n                )}\r\n                <AddCircleIcon fontSize=\"large\" className='printData__add' onClick={() => openForm(title)} tabIndex={0} /></div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PrintData;","import React, { useState } from 'react';\r\nimport './AddForm.css';\r\n\r\nfunction AddForm(props) {\r\n    const [data, setData] = useState({\r\n        name: '',\r\n        logo_url: ''\r\n    })\r\n\r\n    function handleFormChange(event) {\r\n        const newData = { ...data };\r\n        newData[event.target.id] = event.target.value;\r\n        setData(newData);\r\n    }\r\n\r\n    function submitForm(event) {\r\n        event.preventDefault();\r\n        props.onSubmit(data)\r\n    }\r\n\r\n    return (\r\n        <form className='form' onSubmit={(e) => submitForm(e)}>\r\n            <input className='form__input' id='name' type=\"text\" placeholder={props.placeholder} onChange={e => handleFormChange(e)} />\r\n            {props.logo_placeholder && <input className='form__input' id='logo_url' type=\"text\" placeholder={props.logo_placeholder} onChange={e => handleFormChange(e)} />}\r\n            <button className='form__button'>Add</button>\r\n            <p className=\"form__error\">{props.errorMessage}</p>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default AddForm;","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './AdminDashboard.css'\r\nimport { useDataLayerValue } from '../../DataLayer';\r\nimport PrintData from './PrintData/PrintData'\r\nimport AddForm from './AddForm/AddForm'\r\n\r\nconst FestivalsUrl = 'http://ec2-52-51-232-161.eu-west-1.compute.amazonaws.com/api/festival/';\r\nconst ArtistsUrl = \"http://ec2-52-51-232-161.eu-west-1.compute.amazonaws.com/api/artist/\";\r\nconst PlaylistsUrl = 'http://ec2-52-51-232-161.eu-west-1.compute.amazonaws.com/api/playlist/';\r\n\r\nconst FestivalsTitle = 'Festivals';\r\nconst ArtistsTitle = 'Artists';\r\nconst PlaylistsTitle = 'Playlists';\r\n\r\nfunction AdminDashboard(props) {\r\n    const [{ accessToken }, dispatch] = useDataLayerValue();\r\n    const [festivals, setFestivals] = useState([]);\r\n    const [artists, setArtists] = useState([]);\r\n    const [playlists, setPlaylists] = useState([]);\r\n    const [forms, setForms] = useState([\r\n        { title: FestivalsTitle, visible: false },\r\n        { title: ArtistsTitle, visible: false },\r\n        { title: PlaylistsTitle, visible: false },\r\n    ])\r\n\r\n    const [playlistBase, setPlaylistBase] = useState({\r\n        'festivalId': null,\r\n        'artists': [],\r\n        'playlistId': null\r\n    })\r\n\r\n    useEffect(() => {\r\n        axios.get(FestivalsUrl).then((res) => { setFestivals(res.data) })\r\n        axios.get(ArtistsUrl).then((res) => { setArtists(res.data) })\r\n        axios.get(PlaylistsUrl).then((res) => { setPlaylists(res.data) })\r\n    }, []);\r\n\r\n    function handleReturn() {\r\n        sessionStorage.removeItem('state');\r\n        dispatch({\r\n            type: \"SET_FESTIVAL\",\r\n            user: null,\r\n        });\r\n    }\r\n\r\n    function handleFestivalClick(item) {\r\n        let newId = null;\r\n        (item.id !== playlistBase.festivalId) && (newId = item.id);\r\n        setPlaylistBase({\r\n            'festivalId': newId,\r\n            'artists': [...playlistBase.artists],\r\n            'playlistId': null,\r\n        })\r\n    }\r\n\r\n    function handleArtistClick(item) {\r\n        let newArtists = [...playlistBase.artists];\r\n        (playlistBase.artists.indexOf(item.id) === -1)\r\n            ? newArtists.push(item.id)\r\n            : newArtists.splice(playlistBase.artists.indexOf(item.id), 1)\r\n\r\n        setPlaylistBase({\r\n            'festivalId': playlistBase.festivalId,\r\n            'artists': newArtists,\r\n            'playlistId': null,\r\n        })\r\n    }\r\n\r\n    function handlePlaylistClick(item) {\r\n        let newId = null;\r\n        (item.id !== playlistBase.playlistId) && (newId = item.id);\r\n        setPlaylistBase({\r\n            'festivalId': item.festival_id,\r\n            'artists': item.artists.split(',').map((el) => +el),\r\n            'playlistId': newId,\r\n        })\r\n    }\r\n\r\n    function handleToggleForm(title) {\r\n        const newForms = [...forms];\r\n        const changedForm = newForms.find((f) => f.title === title);\r\n        changedForm.visible = !changedForm.visible;\r\n        setForms(newForms);\r\n    }\r\n\r\n    function submitFestivalForm(data) {\r\n        let errorText = '';\r\n        let formatError = 0;\r\n\r\n        (!data.name) && (errorText += `Please enter name <br>`);\r\n        if (!data.logo_url) errorText += 'Please enter url for logo'\r\n        else {\r\n            ['http', '.jpg', '.png', 'svg'].forEach(\r\n                (el) => { (!data.logo_url.includes(el)) && (formatError += 1) });\r\n            (formatError !== 2) && (errorText += 'Please enter valid url, file format should be jpg, svg or png.')\r\n        }\r\n\r\n        if (errorText === '') {\r\n            axios.post(FestivalsUrl, {\r\n                name: data.name,\r\n                logo_url: data.logo_url\r\n            })\r\n                .then(res => axios.get(FestivalsUrl).then((res) => { setFestivals(res.data) }))\r\n                .catch(() => { document.getElementsByClassName('form__error')[0].innerHTML = 'Ooops something went wrong' })\r\n            handleToggleForm(FestivalsTitle)\r\n        }\r\n        else {\r\n            console.log('im here', document.getElementsByClassName('form__error')[0].innerHTML);\r\n            document.getElementsByClassName('form__error')[0].innerHTML = errorText;\r\n            console.log('and now after', document.getElementsByClassName('form__error')[0].innerHTML)\r\n        }\r\n    }\r\n\r\n    function submitArtistForm(data) {\r\n        let errorText = '';\r\n\r\n        // Here where shit code starts. I don't know which input it will be, but it will be either 0 or 1 \r\n        // depends if festivals form open\r\n        let idx = 0;\r\n        (document.getElementsByClassName('form__error').length > 1) && (idx = 1);\r\n\r\n        (!data.name) && (errorText += 'Please enter name');\r\n\r\n        if (errorText === '') {\r\n            axios.post(ArtistsUrl, {\r\n                name: data.name,\r\n            })\r\n                .then(res => axios.get(ArtistsUrl).then((res) => { setArtists(res.data) }))\r\n                .catch(() => { document.getElementsByClassName('form__error')[idx].innerHTML = 'Ooops something went wrong' })\r\n            handleToggleForm(ArtistsTitle);\r\n        }\r\n        else {\r\n            document.getElementsByClassName('form__error')[idx].innerHTML = errorText\r\n        }\r\n    }\r\n\r\n    function submitPlaylistForm(data) {\r\n        let errorText = '';\r\n        // Some more code i'm not proud of. this input always will be the last one\r\n        let idx = document.getElementsByClassName('form__error').length - 1;\r\n\r\n        (!data.name) && (errorText += `Please enter name <br>`);\r\n        (!playlistBase.festivalId || playlistBase.artists.length === 0) &&\r\n            (errorText += 'Please select Festival and Artists');\r\n\r\n        if (errorText === '') {\r\n            axios.post(PlaylistsUrl, {\r\n                festival_id: playlistBase.festivalId,\r\n                artists: playlistBase.artists.join(','),\r\n                name: data.name,\r\n                spotify_token: accessToken\r\n            })\r\n                .then(res => {\r\n                    axios.get(PlaylistsUrl).then((res) => { setPlaylists(res.data) });\r\n                    handleToggleForm(PlaylistsTitle);\r\n                })\r\n                .catch(() => { document.getElementsByClassName('form__error')[idx].innerHTML = 'Ooops something went wrong' })\r\n            setPlaylistBase({\r\n                'festivalId': null,\r\n                'artists': []\r\n            })\r\n        }\r\n        else {\r\n            document.getElementsByClassName('form__error')[idx].innerHTML = errorText\r\n        }\r\n    }\r\n\r\n    return (\r\n        <main className='admin'>\r\n            <header className=\"admin__header\">\r\n                <button className='admin__button' onClick={handleReturn}>Back to music</button>\r\n                <div className=\"admin__instructions\">\r\n                    <p className='admin__help' onClick={handleReturn}>Select festival...</p>\r\n                    <p className='admin__help' onClick={handleReturn}>Select artists...</p>\r\n                    <p className='admin__help' onClick={handleReturn}>Finally press '+' to create a new playlist with selected artists!</p>\r\n                    <p className='admin__help' onClick={handleReturn}>Forgot what playlist contains? No problems, just click on it!</p>\r\n                </div>\r\n            </header>\r\n            <PrintData title={FestivalsTitle} selectedData={playlistBase.festivalId} data={festivals} onClick={handleFestivalClick} openForm={handleToggleForm} />\r\n            {forms.find((f) => f.title === FestivalsTitle).visible && <AddForm onSubmit={submitFestivalForm} placeholder='Festival name' logo_placeholder='Logo url' />}\r\n            <PrintData title={ArtistsTitle} selectedData={playlistBase.artists} data={artists} onClick={handleArtistClick} openForm={handleToggleForm} />\r\n            {forms.find((f) => f.title === ArtistsTitle).visible && <AddForm onSubmit={submitArtistForm} placeholder='Artist name' />}\r\n            <PrintData title={PlaylistsTitle} selectedData={playlistBase.playlistId} data={playlists} onClick={handlePlaylistClick} openForm={handleToggleForm} />\r\n            {forms.find((f) => f.title === PlaylistsTitle).visible && <AddForm onSubmit={submitPlaylistForm} placeholder='Playlist name' />}\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default AdminDashboard;","import React from 'react';\r\nimport './FestivalBlock.css';\r\n\r\nfunction FestivalBlock({ festival, chooseFestival }) {\r\n\r\n    function handleCLick() {\r\n        chooseFestival && chooseFestival(festival);\r\n    }\r\n\r\n    return (\r\n        <div className='festivalBlock' onClick={handleCLick} tabIndex={1}>\r\n            <img className='festivalBlock__logo' src={festival.logo_url} alt={`${festival.name} logo`} />\r\n        </div >\r\n    );\r\n}\r\n\r\nexport default FestivalBlock;","// const redirectUri = 'http://localhost:3000/';\r\nconst redirectUri = 'http://52.51.232.161:3000/';\r\nconst clientId = 'afa5c44e65bc40928f489b6bff9d91fe';\r\n\r\nconst scopes = [\r\n    'streaming',\r\n    'user-read-email',\r\n    'user-read-private',\r\n    'user-library-read',\r\n    'user-library-modify',\r\n    'user-read-playback-state',\r\n    'user-modify-playback-state',\r\n    'playlist-modify-private',\r\n    'playlist-read-private'\r\n]\r\n\r\nfunction login(state) {\r\n    sessionStorage.setItem('state', state);\r\n    const url = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&show_dialog=${sessionStorage.getItem('loggedIn') !== 'true'}&redirect_uri=${redirectUri}&scope=${scopes.join('%20')}`;\r\n    window.location.href = url;\r\n}\r\n\r\nexport default login;","import React, { useState, useEffect } from 'react';\r\nimport './Festivals.css'\r\nimport axios from 'axios';\r\nimport Carousel from 'react-material-ui-carousel'\r\nimport { useDataLayerValue } from '../../DataLayer';\r\nimport FestivalBlock from './FestivalBlock/FestivalBlock'\r\nimport login from '../../login';\r\n\r\n\r\nconst FestivalsUrl = 'http://ec2-52-51-232-161.eu-west-1.compute.amazonaws.com/api/festival/';\r\n\r\nfunction Festivals() {\r\n    const [fests, setFests] = useState([]);\r\n    const [{ accessToken }, dispatch] = useDataLayerValue();\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            const result = await axios(FestivalsUrl);\r\n            setFests(result.data);\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    function handleClick(item) {\r\n        dispatch({\r\n            type: \"SET_FESTIVAL\",\r\n            festival: item,\r\n        });\r\n        sessionStorage.setItem('selectedFestival', JSON.stringify(item));\r\n        accessToken || login('play');\r\n    }\r\n\r\n    function goToAdmin() {\r\n        if (accessToken) {\r\n            sessionStorage.setItem('state', 'admin');\r\n            dispatch({\r\n                type: \"SET_FESTIVAL\",\r\n                festival: null,\r\n            });\r\n        }\r\n        else login('admin');\r\n    }\r\n\r\n    return (\r\n        <div className='festivals'>\r\n            <h4 className=\"festivals__login\" onClick={goToAdmin} tabIndex={1}>Create new playlist</h4>\r\n\r\n            <Carousel\r\n                className=\"carousel\"\r\n                autoPlay={true}\r\n                timer={500}\r\n                animation={'fade'}\r\n                indicators={true}\r\n                timeout={500}\r\n\r\n                navButtonsProps={{\r\n                    style: {\r\n                        backgroundColor: 'white',\r\n                        color: 'black',\r\n                        borderRadius: '10px'\r\n                    }\r\n                }}\r\n\r\n                indicatorIconButtonProps={{\r\n                    style: {\r\n                        color: 'white',\r\n                        margin: '0 10px'\r\n                    }\r\n                }}\r\n                activeIndicatorIconButtonProps={{\r\n                    style: {\r\n                        backgroundColor: 'white',\r\n                    }\r\n                }}\r\n                indicatorContainerProps={{\r\n                    style: {\r\n                        marginTop: '-40px'\r\n                    }\r\n\r\n                }}\r\n            >\r\n                {\r\n                    fests.map(\r\n                        (item) =>\r\n                            <article key={item.id} className='carousel__block' onClick={() => handleClick(item)}>\r\n                                <img src={item.logo_url} alt=\"logo\" className='carousel__image' />\r\n                                <button className='carousel__button' tabIndex={0}>Get <span className='carousel__text'>{item.name}</span> boost!</button>\r\n                            </article>\r\n                    )\r\n                }\r\n            </Carousel>\r\n            <section className=\"festivals__list\">\r\n                {fests.map(\r\n                    (item) =>\r\n                        <FestivalBlock key={item.id} festival={item} chooseFestival={handleClick} />\r\n                )}\r\n            </section>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Festivals;","import { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useDataLayerValue } from './DataLayer';\r\n\r\nconst serverLoginURL = 'http://52.51.232.161:3001/login';\r\nconst serverRefreshURL = 'http://52.51.232.161:3001/refresh';\r\n// const serverLoginURL = 'http://localhost:3001/login';\r\n// const serverRefreshURL = 'http://localhost:3001/refresh';\r\n\r\nfunction useAuth(code) {\r\n    const [{ accessToken, refreshToken, expiresIn }, dispatch] = useDataLayerValue();\r\n\r\n    useEffect(() => {\r\n        axios.post(serverLoginURL, {\r\n            code,\r\n        })\r\n            .then(res => {\r\n                dispatch({\r\n                    type: \"SET_ACCESS_TOKEN\",\r\n                    accessToken: res.data.accessToken,\r\n                });\r\n                dispatch({\r\n                    type: \"SET_REFRESH_TOKEN\",\r\n                    refreshToken: res.data.refreshToken,\r\n                });\r\n                dispatch({\r\n                    type: \"SET_EXPIRES_IN\",\r\n                    expiresIn: res.data.expiresIn,\r\n                });\r\n\r\n                window.history.pushState({}, null, '/');\r\n                sessionStorage.setItem('loggedIn', true);\r\n                sessionStorage.setItem('token', res.data.accessToken);\r\n                sessionStorage.setItem('refreshToken', res.data.refreshToken);\r\n                sessionStorage.setItem('expiresIn', res.data.expiresIn);\r\n            })\r\n            .catch(() => {\r\n                window.location = '/';\r\n            });\r\n    }, [code, dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (!refreshToken || !expiresIn) return;\r\n\r\n        const interval = setInterval(() => {\r\n            axios.post(serverRefreshURL, {\r\n                refreshToken,\r\n            })\r\n                .then(res => {\r\n                    console.log('here is response', res);\r\n\r\n                    dispatch({\r\n                        type: \"SET_ACCESS_TOKEN\",\r\n                        accessToken: res.data.accessToken,\r\n                    });\r\n                    dispatch({\r\n                        type: \"SET_EXPIRES_IN\",\r\n                        expiresIn: res.data.expiresIn,\r\n                    });\r\n                    console.log('new token');\r\n                    sessionStorage.setItem('token', res.data.accessToken);\r\n                })\r\n                .catch((err) => {\r\n                    sessionStorage.removeItem('token');\r\n                    sessionStorage.removeItem('refreshToken');\r\n                    sessionStorage.removeItem('expiresIn');\r\n                    console.log(err);\r\n                    // window.location = '/';\r\n                });\r\n        }, (expiresIn - 60) * 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [refreshToken, expiresIn, dispatch]);\r\n\r\n    return accessToken;\r\n}\r\n\r\nexport default useAuth;","import Dashboard from './components/Dashboard/Dashboard';\r\nimport AdminDashboard from './components/AdminDashboard/AdminDashboard';\r\nimport Festivals from './components/Festivals/Festivals';\r\nimport useAuth from './useAuth';\r\nimport { useDataLayerValue } from './DataLayer';\r\n\r\nconst urlCode = new URLSearchParams(window.location.search).get('code');\r\n\r\nfunction App() {\r\n  const [{ festival }] = useDataLayerValue();\r\n  useAuth(urlCode);\r\n\r\n  return (\r\n    (sessionStorage.getItem('state') === 'admin') ? <AdminDashboard /> :\r\n      festival ? <Dashboard /> : <Festivals />\r\n  )\r\n\r\n}\r\n\r\nexport default App;\r\n","export const initialState = {\r\n    user: null,\r\n    playlists: [],\r\n    favorites: localStorage.getItem('favorites')?.split(',') || [],\r\n    playingPlaylist: null,\r\n    accessToken: sessionStorage.getItem('token') || null,\r\n    refreshToken: sessionStorage.getItem('refreshToken') || null,\r\n    expiresIn: sessionStorage.getItem('expiresIn') || null,\r\n    premium: false,\r\n    playingTrack: null,\r\n    playingNow: false,\r\n    festival: JSON.parse(sessionStorage.getItem('selectedFestival')) || null,\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'SET_USER': {\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n            };\r\n        }\r\n        case 'SET_PLAYLISTS':\r\n            return {\r\n                ...state,\r\n                playlists: [...state.playlists, action.playlist],\r\n            };\r\n        case 'SET_PLAYLIST':\r\n            return {\r\n                ...state,\r\n                playingPlaylist: action.playingPlaylist,\r\n            };\r\n        case 'SET_ACCESS_TOKEN':\r\n            return {\r\n                ...state,\r\n                accessToken: action.accessToken,\r\n            };\r\n        case 'SET_REFRESH_TOKEN':\r\n            return {\r\n                ...state,\r\n                refreshToken: action.refreshToken,\r\n            };\r\n        case 'SET_EXPIRES_IN':\r\n            return {\r\n                ...state,\r\n                expiresIn: action.expiresIn,\r\n            };\r\n        case 'SET_PREMIUM':\r\n            return {\r\n                ...state,\r\n                premium: action.premium,\r\n            };\r\n        case \"SET_PLAYING_TRACK\":\r\n            return {\r\n                ...state,\r\n                playingTrack: action.playingTrack,\r\n            };\r\n        case \"SET_FAVORITES\":\r\n            return {\r\n                ...state,\r\n                favorites: action.favorites,\r\n            };\r\n        case \"SET_PLAYING_NOW\":\r\n            return {\r\n                ...state,\r\n                playingNow: action.playingNow,\r\n            };\r\n        case \"SET_FESTIVAL\":\r\n            return {\r\n                ...state,\r\n                festival: action.festival,\r\n                playlists: [],\r\n                playingPlaylist: null,\r\n                playingTrack: null,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { DataLayer } from './DataLayer';\nimport reducer, { initialState } from './reducer';\n\nReactDOM.render(\n  <React.StrictMode>\n    <DataLayer initialState={initialState} reducer={reducer}>\n      <App />\n    </DataLayer>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}